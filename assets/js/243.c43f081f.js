(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{659:function(e,v,_){"use strict";_.r(v);var o=_(62),a=Object(o.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"package-lock-json"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#package-lock-json"}},[e._v("#")]),e._v(" package-lock.json")]),e._v(" "),_("p",[e._v("对于 "),_("code",[e._v("npm install")]),e._v(" 而言，它的输入是 "),_("code",[e._v("package.json")]),e._v("，输出则是一棵 "),_("code",[e._v("node_modules")]),e._v(" 树。")]),e._v(" "),_("p",[e._v("理想情况下，"),_("code",[e._v("npm install")]),e._v(" 应该像纯函数一样工作，对于同一个 "),_("code",[e._v("package.json")]),e._v(" 总是生成完全相同的 "),_("code",[e._v("node_modules")]),e._v(" 树。")]),e._v(" "),_("p",[e._v("在某些情况下，确实如此。但在其他很多情况中，"),_("code",[e._v("npm")]),e._v(" 无法做到这一点。有以下原因：")]),e._v(" "),_("ul",[_("li",[e._v("不同版本的 "),_("code",[e._v("npm")]),e._v(" 的安装算法不同。")]),e._v(" "),_("li",[e._v("某些依赖项自上次安装以来，可能已发布了新版本，因此将根据 "),_("code",[e._v("package.json")]),e._v(" 中的 "),_("code",[e._v("semver-range version")]),e._v(" 更新依赖。")]),e._v(" "),_("li",[e._v("某个依赖项的依赖项可能已发布新版本，即使您使用了固定依赖项说明符（1.2.3 而不是 ^1.2.3），它也会更新。")])]),e._v(" "),_("h2",{attrs:{id:"工作机制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#工作机制"}},[e._v("#")]),e._v(" 工作机制")]),e._v(" "),_("p",[e._v("如果只有一个 "),_("code",[e._v("package.json")]),e._v(" 文件，运行 "),_("code",[e._v("npm i")]),e._v(" 会根据它生成一个 "),_("code",[e._v("package-lock.json")]),e._v(" 文件。")]),e._v(" "),_("p",[e._v("如果某个依赖项在 "),_("code",[e._v("package.json")]),e._v(" 中，但是不在 "),_("code",[e._v("package-lock.json")]),e._v(" 中，运行 "),_("code",[e._v("npm install")]),e._v(" 会将这个依赖项的确定版本更新到 "),_("code",[e._v("package-lock.json")]),e._v(" 中。")]),e._v(" "),_("p",[e._v("如果 "),_("code",[e._v("package.json")]),e._v(" 的 "),_("code",[e._v("semver-range version")]),e._v(" 和 "),_("code",[e._v("package-lock.json")]),e._v(" 中版本兼容，即使此时 "),_("code",[e._v("package.json")]),e._v(" 中有新的版本，执行 "),_("code",[e._v("npm i")]),e._v(" 也还是会根据 "),_("code",[e._v("package-lock.json")]),e._v(" 下载。")]),e._v(" "),_("p",[e._v("如果手动修改了 "),_("code",[e._v("package.json")]),e._v(" 的 "),_("code",[e._v("version ranges")]),e._v("，且和 "),_("code",[e._v("package-lock.json")]),e._v(" 中版本不兼容，那么执行 "),_("code",[e._v("npm i")]),e._v(" 时 "),_("code",[e._v("package-lock.json")]),e._v(" 将会更新到兼容 "),_("code",[e._v("package.json")]),e._v(" 的版本。")]),e._v(" "),_("h2",{attrs:{id:"参考"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://juejin.im/post/5d40f9a4e51d45620821ce30",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm install package-lock.json 的更新策略 - 掘金"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=a.exports}}]);